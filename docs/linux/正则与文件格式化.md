# 正则与文件格式化

## 正则
> 正则是一个字符串处理的标准依据。若要以正则表示法的方式处理字符串，就要使用支持正则表示法的工具程序，如：vi，grep， sed， awk等

### 语系对正则表示法的影响
- LANG=C 时：0 1 2 3 4 ... A B C D ... a b c d ...z
- LANG=zh_TW时： 0 1 2 3 4 ... a A b B c C ...z Z
使用正则表达式，需要特别留意当时环境的语系，否则可能会发现与别人的结果不相同。通常情况下使用的是兼容于POSIX的标准，因此就是使用 C 这个语系。

|特殊符号|代表意义|
|---|---|
|[:alnum:]|代表英文大小写字符及数字，即0-9 A-Z a-z|
|[:alpha:]|代表任何英文大小写字符，即A-Z，a-z|
|[:blank:]|代表空格键与 tab |
|[:cntrl:]|代表键盘上面的控制按键，即 CR，LF，Tab，Del 等|
|[:digit:]|代表数字，即0-9|
|[:graph:]|除了空格符 tab 外的其他所有按键|
|[:lower:]|代表小写符，即a-z|
|[:print:]|代表任何可以被打印出来的字符|
|[:punct:]|代表标点符号，即"'?!;:#$...|
|[:upper:]|代表大写字符，即A-Z|
|[:space:]|任何会产生空白的字符，包括空格键 tab CR 等|
|[:xdigit:]|代表16进制的数字类型，0-9， a-f， A-F的数字与字符|

demsg
|选项|参数|
|---|---|
|-A| 后面可接数字，为after的意思，除了列出该行外，后续的n行也列出来|
|-B| 后面可接数字，为before的意思，除了列出改行外，前面的n行也列出来|
|--color=auto|可将正确的那个撷取数据显示出颜色|

```shell
# dmesg 显示出核心信息
[az@iZbp13op1xah7j3j1x457dZ bin]$ dmesg | grep 'XFS'
[3453874.290904] SGI XFS with ACLs, security attributes, no debug enabled
[3453874.293188] XFS (loop0): Mounting V5 Filesystem
[3453874.635609] XFS (loop0): Ending clean mount
[3454148.892624] XFS (loop0): Unmounting Filesystem
[az@iZbp13op1xah7j3j1x457dZ bin]$

[az@iZbp13op1xah7j3j1x457dZ bin]$ dmesg | grep -n --color=auto 'XFS'
2921:[3453874.290904] SGI XFS with ACLs, security attributes, no debug enabled
2922:[3453874.293188] XFS (loop0): Mounting V5 Filesystem
2923:[3453874.635609] XFS (loop0): Ending clean mount
2924:[3454148.892624] XFS (loop0): Unmounting Filesystem
[az@iZbp13op1xah7j3j1x457dZ bin]$

[az@iZbp13op1xah7j3j1x457dZ bin]$ dmesg | grep -n -A3 -B2 --color=auto 'XFS'
2919-[ 4917.531676] Killed process 3165 (ruby), UID 995, total-vm:1043568kB, anon-rss:583624kB, file-rss:0kB, shmem-rss:720kB
2920-[3453874.208049] loop: module loaded
2921:[3453874.290904] SGI XFS with ACLs, security attributes, no debug enabled
2922:[3453874.293188] XFS (loop0): Mounting V5 Filesystem
2923:[3453874.635609] XFS (loop0): Ending clean mount
2924:[3454148.892624] XFS (loop0): Unmounting Filesystem
[az@iZbp13op1xah7j3j1x457dZ bin]$ 
```

### 基础连续
```shell
"Open Source" is good mechanism to develop programs.
apple is my favorite food.
Football game is not use feet only.
this dress doesn`t fit me.
Howwver, this dress is about $ 3183 dollars.^M
GUN is free air not free beer.^M
Her hair is very beauty.^M
I can`t finish the test.^M
Oh! The soup taste good.^M
motorcycle is cheap than car.
This window is clear.
this symbol '*' is represented as star1.
Oh! My god!
The gd software is a library for drafting programs.^M
Your are the best is mean you are the no. 1.
The world <Happy> is the same with "glad".
I like dog.
google is the best tools for search keyword.
goooooogle yes!
go! go! Let`s go.
# I am AZ

```
- 查找特定字符串
```shell
[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -n 'the' regular_express.txt 
8:I can`t finish the test.^M
15:Your are the best is mean you are the no. 1.
16:The world <Happy> is the same with "glad".
18:google is the best tools for search keyword.
[az@iZbp13op1xah7j3j1x457dZ ~]$

# 反向选择
[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -vn 'the' regular_express.txt 
1:"Open Source" is good mechanism to develop programs.
2:apple is my favorite food.
3:Football game is not use feet only.
4:this dress doesn`t fit me.
5:Howwver, this dress is about $ 3183 dollars.^M
6:GUN is free air not free beer.^M
7:Her hair is very beauty.^M
9:Oh! The soup taste good.^M
10:motorcycle is cheap than car.
11:This window is clear.
12:this symbol '*' is represented as star1.
13:Oh! My god!
14:The gd software is a library for drafting programs.^M
17:I like dog.
19:goooooogle yes!
20:go! go! Let`s go.
21:# I am AZ
22:
[az@iZbp13op1xah7j3j1x457dZ ~]$

# 忽略大小写
[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -in 'the' regular_express.txt 
8:I can`t finish the test.^M
9:Oh! The soup taste good.^M
14:The gd software is a library for drafting programs.^M
15:Your are the best is mean you are the no. 1.
16:The world <Happy> is the same with "glad".
18:google is the best tools for search keyword.
[az@iZbp13op1xah7j3j1x457dZ ~]$ 
```
- 利用[]来查找集合字符

```shell
# 查找test 或 taste []里面不论有几个字符，他都代表某一个字符
[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -n 't[ae]st' regular_express.txt 
8:I can`t finish the test.^M
9:Oh! The soup taste good.^M
[az@iZbp13op1xah7j3j1x457dZ ~]$

# 查找有 oo 的字符
[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -n 'oo' regular_express.txt 
1:"Open Source" is good mechanism to develop programs.
2:apple is my favorite food.
3:Football game is not use feet only.
9:Oh! The soup taste good.^M
18:google is the best tools for search keyword.
19:goooooogle yes!
[az@iZbp13op1xah7j3j1x457dZ ~]$ 

# 查找oo并且前面没有g
[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -n '[^g]oo' regular_express.txt 
2:apple is my favorite food.
3:Football game is not use feet only.
18:google is the best tools for search keyword.
19:goooooogle yes!
[az@iZbp13op1xah7j3j1x457dZ ~]$
# 因为gooooogle里面的oo前面可能是o，如go(oo)ooogle

# 查找oo前面不是小写字符
[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -n '[^a-z]oo' regular_express.txt 
3:Football game is not use feet only.
[az@iZbp13op1xah7j3j1x457dZ ~]$

# 查找数字
[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -n '[0-9]' regular_express.txt 
5:Howwver, this dress is about $ 3183 dollars.^M
12:this symbol '*' is represented as star1.
15:Your are the best is mean you are the no. 1.
[az@iZbp13op1xah7j3j1x457dZ ~]$ 

# 语系对编码顺序的影响， 除了连续编码使用 - 之外， 可以使用如下的方法
[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -n '[^[:lower:]]oo' regular_express.txt 
3:Football game is not use feet only.
[az@iZbp13op1xah7j3j1x457dZ ~]$

[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -n '[[:digit:]]' regular_express.txt 
5:Howwver, this dress is about $ 3183 dollars.^M
12:this symbol '*' is represented as star1.
15:Your are the best is mean you are the no. 1.
[az@iZbp13op1xah7j3j1x457dZ ~]$ 

```
- 行首与行尾字符 ^ $
```shell
[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -n '^the' regular_express.txt 
12:the symbol '*' is represented as star1.
[az@iZbp13op1xah7j3j1x457dZ ~]$

[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -n '^[a-z]' regular_express.txt 
2:apple is my favorite food.
4:this dress doesn`t fit me.
10:motorcycle is cheap than car.
12:the symbol '*' is represented as star1.
18:google is the best tools for search keyword.
19:goooooogle yes!
20:go! go! Let`s go.
[az@iZbp13op1xah7j3j1x457dZ ~]$

[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -n '^[[:lower:]]' regular_express.txt 
2:apple is my favorite food.
4:this dress doesn`t fit me.
10:motorcycle is cheap than car.
12:the symbol '*' is represented as star1.
18:google is the best tools for search keyword.
19:goooooogle yes!
20:go! go! Let`s go.
[az@iZbp13op1xah7j3j1x457dZ ~]$


[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -n '^[^a-zA-Z]' regular_express.txt 
1:"Open Source" is good mechanism to develop programs.
21:# I am AZ
[az@iZbp13op1xah7j3j1x457dZ ~]$


[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -n '\.$' regular_express.txt 
1:"Open Source" is good mechanism to develop programs.
2:apple is my favorite food.
3:Football game is not use feet only.
4:this dress doesn`t fit me.
10:motorcycle is cheap than car.
11:This window is clear.
12:the symbol '*' is represented as star1.
15:Your are the best is mean you are the no. 1.
16:The world <Happy> is the same with "glad".
17:I like dog.
18:google is the best tools for search keyword.
20:go! go! Let`s go.
[az@iZbp13op1xah7j3j1x457dZ ~]$

# 在Linux 与 windows上的差异， windows的断行字符（^M$），而正常的Linux中是$
[az@iZbp13op1xah7j3j1x457dZ ~]$ cat -An regular_express.txt | head -n 10 | tail -n 6
     5  Howwver, this dress is about $ 3183 dollars.^M$
     6  GUN is free air not free beer.^M$
     7  Her hair is very beauty.^M$
     8  I can`t finish the test.^M$
     9  Oh! The soup taste good.^M$
    10  motorcycle is cheap than car.$
[az@iZbp13op1xah7j3j1x457dZ ~]$

# 查找空白行
[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -n '^$' regular_express.txt 
22:
[az@iZbp13op1xah7j3j1x457dZ ~]$



[az@iZbp13op1xah7j3j1x457dZ ~]$ cat -n /etc/rsyslog.conf
     1  # rsyslog configuration file
     2
     3  # For more information see /usr/share/doc/rsyslog-*/rsyslog_conf.html
     4  # If you experience problems, see http://www.rsyslog.com/doc/troubleshoot.html
     5
     6  #### MODULES ####
     7
     8  # The imjournal module bellow is now used as a message source instead of imuxsock.
     9  $ModLoad imuxsock # provides support for local system logging (e.g. via logger command)
    10  $ModLoad imjournal # provides access to the systemd journal
    11  #$ModLoad imklog # reads kernel messages (the same are read from journald)
    12  #$ModLoad immark  # provides --MARK-- message capability
    13
    14  # Provides UDP syslog reception
    15  #$ModLoad imudp
    16  #$UDPServerRun 514
    17
    18  # Provides TCP syslog reception
    19  #$ModLoad imtcp
    20  #$InputTCPServerRun 514
    21
    22
    23  #### GLOBAL DIRECTIVES ####
    24
    25  # Where to place auxiliary files
    26  $WorkDirectory /var/lib/rsyslog
    27
    28  # Use default timestamp format
    29  $ActionFileDefaultTemplate RSYSLOG_TraditionalFileFormat
    30
    31  # File syncing capability is disabled by default. This feature is usually not required,
    32  # not useful and an extreme performance hit
    33  #$ActionFileEnableSync on
    34
    35  # Include all config files in /etc/rsyslog.d/
    36  $IncludeConfig /etc/rsyslog.d/*.conf
    37
    38  # Turn off message reception via local log socket;
    39  # local messages are retrieved through imjournal now.
    40  $OmitLocalLogging on
    41
    42  # File to store the position in the journal
    43  $IMJournalStateFile imjournal.state
    44
    45
    46  #### RULES ####
    47
    48  # Log all kernel messages to the console.
    49  # Logging much else clutters up the screen.
    50  #kern.*                                                 /dev/console
    51
    52  # Log anything (except mail) of level info or higher.
    53  # Don't log private authentication messages!
    54  *.info;mail.none;authpriv.none;cron.none                /var/log/messages
    55
    56  # The authpriv file has restricted access.
    57  authpriv.*                                              /var/log/secure
    58
    59  # Log all the mail messages in one place.
    60  mail.*                                                  -/var/log/maillog
    61
    62
    63  # Log cron stuff
    64  cron.*                                                  /var/log/cron
    65
    66  # Everybody gets emergency messages
    67  *.emerg                                                 :omusrmsg:*
    68
    69  # Save news errors of level crit and higher in a special file.
    70  uucp,news.crit                                          /var/log/spooler
    71
    72  # Save boot messages also to boot.log
    73  local7.*                                                /var/log/boot.log
    74
    75
    76  # ### begin forwarding rule ###
    77  # The statement between the begin ... end define a SINGLE forwarding
    78  # rule. They belong together, do NOT split them. If you create multiple
    79  # forwarding rules, duplicate the whole block!
    80  # Remote Logging (we use TCP for reliable delivery)
    81  #
    82  # An on-disk queue is created for this action. If the remote host is
    83  # down, messages are spooled to disk and sent when it is up again.
    84  #$ActionQueueFileName fwdRule1 # unique name prefix for spool files
    85  #$ActionQueueMaxDiskSpace 1g   # 1gb space limit (use as much as possible)
    86  #$ActionQueueSaveOnShutdown on # save messages to disk on shutdown
    87  #$ActionQueueType LinkedList   # run asynchronously
    88  #$ActionResumeRetryCount -1    # infinite retries if host is down
    89  # remote host is: name/ip:port, e.g. 192.168.0.1:514, port optional
    90  #*.* @@remote-host:514
    91  # ### end of the forwarding rule ###
[az@iZbp13op1xah7j3j1x457dZ ~]$


# 除去空白行 不要#开头的行
[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -v '^$' /etc/rsyslog.conf | grep -v '^#'
$ModLoad imuxsock # provides support for local system logging (e.g. via logger command)
$ModLoad imjournal # provides access to the systemd journal
$WorkDirectory /var/lib/rsyslog
$ActionFileDefaultTemplate RSYSLOG_TraditionalFileFormat
$IncludeConfig /etc/rsyslog.d/*.conf
$OmitLocalLogging on
$IMJournalStateFile imjournal.state
*.info;mail.none;authpriv.none;cron.none                /var/log/messages
authpriv.*                                              /var/log/secure
mail.*                                                  -/var/log/maillog
cron.*                                                  /var/log/cron
*.emerg                                                 :omusrmsg:*
uucp,news.crit                                          /var/log/spooler
local7.*                                                /var/log/boot.log
[az@iZbp13op1xah7j3j1x457dZ ~]$ 

```

- 任意一个字符 . 与重复字符 *
  . : 代表 一定有一个任意字符 的意思
  * : 代表 重复前一个字符， 0 到无穷多次 的意思， 为组合形态
```shell
[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -n 'g.d' regular_express.txt 
13:Oh! My god!
[az@iZbp13op1xah7j3j1x457dZ ~]$

[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -n 'g..d' regular_express.txt 
1:"Open Source" is good mechanism to develop programs.
9:Oh! The soup taste good.^M
16:The world <Happy> is the same with "glad".
[az@iZbp13op1xah7j3j1x457dZ ~]$

# 重复o 0个或无穷多个
[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -n 'o*' regular_express.txt 
1:"Open Source" is good mechanism to develop programs.
2:apple is my favorite food.
3:Football game is not use feet only.
4:this dress doesn`t fit me.
5:Howwver, this dress is about $ 3183 dollars.^M
6:GUN is free air not free beer.^M
7:Her hair is very beauty.^M
8:I can`t finish the test.^M
9:Oh! The soup taste good.^M
10:motorcycle is cheap than car.
11:This window is clear.
12:the symbol '*' is represented as star1.
13:Oh! My god!
14:The gd software is a library for drafting programs.^M
15:Your are the best is mean you are the no. 1.
16:The world <Happy> is the same with "glad".
17:I like dog.
18:google is the best tools for search keyword.
19:goooooogle yes!
20:go! go! Let`s go.
21:# I am AZ
22:
[az@iZbp13op1xah7j3j1x457dZ ~]$ 

# 第一个必须是o 后面可以是0个或无穷多个
[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -n 'oo*' regular_express.txt 
1:"Open Source" is good mechanism to develop programs.
2:apple is my favorite food.
3:Football game is not use feet only.
4:this dress doesn`t fit me.
5:Howwver, this dress is about $ 3183 dollars.^M
6:GUN is free air not free beer.^M
9:Oh! The soup taste good.^M
10:motorcycle is cheap than car.
11:This window is clear.
12:the symbol '*' is represented as star1.
13:Oh! My god!
14:The gd software is a library for drafting programs.^M
15:Your are the best is mean you are the no. 1.
16:The world <Happy> is the same with "glad".
17:I like dog.
18:google is the best tools for search keyword.
19:goooooogle yes!
20:go! go! Let`s go.
[az@iZbp13op1xah7j3j1x457dZ ~]$

# 必须是oo 后面可以是0个或无穷多个o
[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -n 'ooo*' regular_express.txt 
1:"Open Source" is good mechanism to develop programs.
2:apple is my favorite food.
3:Football game is not use feet only.
9:Oh! The soup taste good.^M
18:google is the best tools for search keyword.
19:goooooogle yes!
[az@iZbp13op1xah7j3j1x457dZ ~]$ 

# 字符串开头是g 结尾是g，且两个g之前至少有一个o
[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -n 'goo*g' regular_express.txt 
18:google is the best tools for search keyword.
19:goooooogle yes!
[az@iZbp13op1xah7j3j1x457dZ ~]$

# 开头g与结尾g，当中的字符可有可无 .* 表示零个或任意多个字符
[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -n 'g.*g' regular_express.txt 
1:"Open Source" is good mechanism to develop programs.
14:The gd software is a library for drafting programs.^M
18:google is the best tools for search keyword.
19:goooooogle yes!
20:go! go! Let`s go.
[az@iZbp13op1xah7j3j1x457dZ ~]$


# 任意数字
[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -n '[0-9][0-9]*' regular_express.txt 
5:Howwver, this dress is about $ 3183 dollars.^M
12:the symbol '*' is represented as star1.
15:Your are the best is mean you are the no. 1.
[az@iZbp13op1xah7j3j1x457dZ ~]$ 
```

- 限定连续RE字符范围 ｛｝
```shell
# 这个和 grep -n 'ooo*' reqular_express.txt 一样
[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -n 'o\{2\}' regular_express.txt 
1:"Open Source" is good mechanism to develop programs.
2:apple is my favorite food.
3:Football game is not use feet only.
9:Oh! The soup taste good.^M
18:google is the best tools for search keyword.
19:goooooogle yes!
[az@iZbp13op1xah7j3j1x457dZ ~]$ 


[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -n 'go\{2,5\}g' regular_express.txt 
18:google is the best tools for search keyword.
[az@iZbp13op1xah7j3j1x457dZ ~]$

[az@iZbp13op1xah7j3j1x457dZ ~]$ grep -n 'go\{2,\}g' regular_express.txt 
18:google is the best tools for search keyword.
19:goooooogle yes!
[az@iZbp13op1xah7j3j1x457dZ ~]$ 
```

### 基础正则表示字符
|RE字符|意义与范例|
|---|---|
|^word|查找word在行首<br> 查找行首为#的那一行，且显示出行号<br> grep -n '^#' regular_express.txt|
|word$|查找word在行尾<br> 查找行尾为!的那一行，且显示出行号<br> grep -n '!$' regular_express.txt|
|.|一定有一个任意字符<br> 查找的字符串可以是（eve）（eae）（eee）（e e），但不能仅有（ee）<br> grep -n 'e.e' regular_express.txt|
|\|跳脱字符<br> 查找含有单引号 ' 的那一行<br> grep -n \' regular_express.txt|
|*|重复零个或无穷多个前一个RE字符<br>查找含有（es）（ess）（esss）等的字符串<br> grep -n 'ess*' regular_express.txt|
|[list]|字符集合RE字符，里面列出想要撷取的字符<br>查找含有（gl）或（gd）的那一行<br>grep -n 'g[ld]' regular_express.txt|
|[n1-n2]|字符集合的RE字符，里面列出想要撷取的字符<br>grep -n '[A-Z]' regular_express.txt|
|^list|字符集合的RE字符，里面列出不要的字符或范围<br>不包含oot的那一行<br>grep -n 'oo[^t]' regular_express.txt|
|\{n,m\}|连续n到m个的 RE 字符 <br> 若为\{n\} 则是连续n个的 前一个RE 字符<br> 若是\{n,\} 则是连续n个以上的前一个RE字符<br>在 g 与 g 之间有2个到3个的o存在的字符串，即 （goog）（gooog）<br> grep -n 'go\{2,3\}g' regular_express.txt|


## sed 工具
sed 是一个管线命令，可以分析standard input。且sed还可以将数据进行取代、删除、新增、撷取特定行等等的功能
|选项|解释|
|---|---|
|-n|使用静默模式。在一般sed的用法中，所有来自STDIN的数据一般都会被列出到屏幕上，但如果加上-n参数后，则只有经过sed特殊处理的那一行（或者动作）才会被列出来|
|-c|直接在指令模式上进行sed的动作编辑|
|-f|直接将sed的动作写在一个文件内，-f filename 则可以执行filename内的sed动作|
|-r|sed的动作支持的是延申型正则表示的语法|
|-i|直接修改读取文件内容，而不是由屏幕输出|
|动作说明|[n1[,n2]]function|
|n1,n2|不见得会存在，一般代表 选择进行动作的行数 如：如果动作是需要在10到20行之间进行的， 10,20[动作行为]|
|function如下||
|a|新增。a的后面可以接字符串，而这些字符串会在新的一行出现，即下一行|
|c|取代。c的后面可以接字符串，这些字符串可以取代n1，n2之间的行|
|d|删除。d后面不接任何数据|
|i|插入。i的后面可以接字符串，而这些字符串会在新的一行出现，即上一行|
|p|打印。将某个选择的数据打印出来。通常p会与参数sed -n 一起运行|
|s|取代。可以之间进行取代的工作。通常这个s的动作可以搭配正则表达式|

- 以行为单位的新增/删除功能
  ```shell
  [root@iZbp13op1xah7j3j1x457dZ ~]# nl /etc/passwd | sed '2,5d'
     1  root:x:0:0:root:/root:/bin/bash
     6  sync:x:5:0:sync:/sbin:/bin/sync
     7  shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
     8  halt:x:7:0:halt:/sbin:/sbin/halt
     9  mail:x:8:12:mail:/var/spool/mail:/sbin/nologin
    10  operator:x:11:0:operator:/root:/sbin/nologin
    11  games:x:12:100:games:/usr/games:/sbin/nologin
    12  ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin
    13  nobody:x:99:99:Nobody:/:/sbin/nologin
    14  systemd-network:x:192:192:systemd Network Management:/:/sbin/nologin
    15  dbus:x:81:81:System message bus:/:/sbin/nologin
    16  polkitd:x:999:998:User for polkitd:/:/sbin/nologin
    17  sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin
    18  postfix:x:89:89::/var/spool/postfix:/sbin/nologin
    19  chrony:x:998:996::/var/lib/chrony:/sbin/nologin
    20  nscd:x:28:28:NSCD Daemon:/:/sbin/nologin
    21  tcpdump:x:72:72::/:/sbin/nologin
    22  rpc:x:32:32:Rpcbind Daemon:/var/lib/rpcbind:/sbin/nologin
    23  rpcuser:x:29:29:RPC Service User:/var/lib/nfs:/sbin/nologin
    24  nfsnobody:x:65534:65534:Anonymous NFS User:/var/lib/nfs:/sbin/nologin
    25  nginx:x:997:995:Nginx web server:/var/lib/nginx:/sbin/nologin
    26  gitlab-www:x:996:993::/var/opt/gitlab/nginx:/bin/false
    27  git:x:995:992::/var/opt/gitlab:/bin/sh
    28  gitlab-redis:x:994:991::/var/opt/gitlab/redis:/bin/false
    29  gitlab-psql:x:993:990::/var/opt/gitlab/postgresql:/bin/sh
    30  gitlab-prometheus:x:992:989::/var/opt/gitlab/prometheus:/bin/sh
    31  az:x:1000:1000::/home/az:/bin/bash
    32  alex:x:1001:1002::/home/alex:/bin/bash
    33  arod:x:1002:1001::/home/arod:/bin/bash
  [root@iZbp13op1xah7j3j1x457dZ ~]# nl /etc/passwd | sed '2,32d'
     1  root:x:0:0:root:/root:/bin/bash
    33  arod:x:1002:1001::/home/arod:/bin/bash
  [root@iZbp13op1xah7j3j1x457dZ ~]#

  [root@iZbp13op1xah7j3j1x457dZ ~]# nl /etc/passwd | sed '2a drink tea'
     1  root:x:0:0:root:/root:/bin/bash
     2  bin:x:1:1:bin:/bin:/sbin/nologin
  drink tea
     3  daemon:x:2:2:daemon:/sbin:/sbin/nologin


  [root@iZbp13op1xah7j3j1x457dZ ~]# nl /etc/passwd | sed '2a dirnk tea or ...\
  > dirnk beer?'
     1  root:x:0:0:root:/root:/bin/bash
     2  bin:x:1:1:bin:/bin:/sbin/nologin
  dirnk tea or ...
  dirnk beer?
     3  daemon:x:2:2:daemon:/sbin:/sbin/nologin
  [root@iZbp13op1xah7j3j1x457dZ ~]#

  [root@iZbp13op1xah7j3j1x457dZ ~]# nl /etc/passwd | sed '2i hello'
     1  root:x:0:0:root:/root:/bin/bash
  hello
     2  bin:x:1:1:bin:/bin:/sbin/nologin
  ```
- 以行为单位的取代与显示功能
```shell
[root@iZbp13op1xah7j3j1x457dZ ~]# nl /etc/passwd | sed '2,5c No 2-5 number'
     1  root:x:0:0:root:/root:/bin/bash
No 2-5 number
     6  sync:x:5:0:sync:/sbin:/bin/sync
     7  shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
     8  halt:x:7:0:halt:/sbin:/sbin/halt


[root@iZbp13op1xah7j3j1x457dZ ~]# nl /etc/passwd | sed -n '5,7p'
     5  lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin
     6  sync:x:5:0:sync:/sbin:/bin/sync
     7  shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
[root@iZbp13op1xah7j3j1x457dZ ~]# 
```
- 部分数据的搜寻并取代的功能
```shell
# 查询IP
[az@iZbp13op1xah7j3j1x457dZ ~]$ /sbin/ifconfig eth0
eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 172.16.100.115  netmask 255.255.255.0  broadcast 172.16.100.255
        inet6 fe80::216:3eff:fe13:7e86  prefixlen 64  scopeid 0x20<link>
        ether 00:16:3e:13:7e:86  txqueuelen 1000  (Ethernet)
        RX packets 8015016  bytes 1438042486 (1.3 GiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 8504927  bytes 1924522132 (1.7 GiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

[az@iZbp13op1xah7j3j1x457dZ ~]$

# 利用grep撷取关键行数据
[az@iZbp13op1xah7j3j1x457dZ ~]$ /sbin/ifconfig eth0 | grep 'inet'
        inet 172.16.100.115  netmask 255.255.255.0  broadcast 172.16.100.255
        inet6 fe80::216:3eff:fe13:7e86  prefixlen 64  scopeid 0x20<link>
[az@iZbp13op1xah7j3j1x457dZ ~]$ 

# 将IP前面的部分删除  sed s为替换 /^.*inet//g 匹配到 的替换为空字符
[az@iZbp13op1xah7j3j1x457dZ ~]$ /sbin/ifconfig eth0 | grep 'inet' | sed 's/^.*inet //g'
172.16.100.115  netmask 255.255.255.0  broadcast 172.16.100.255
        inet6 fe80::216:3eff:fe13:7e86  prefixlen 64  scopeid 0x20<link>
[az@iZbp13op1xah7j3j1x457dZ ~]$

# sed 's/ *netmask.*$//g' 匹配 netmask前面任意多个空格 并以netmask.为结尾
[az@iZbp13op1xah7j3j1x457dZ ~]$ /sbin/ifconfig eth0 | grep 'inet' | sed 's/^.*inet //g' | sed 's/ *netmask.*$//g'
172.16.100.115
        inet6 fe80::216:3eff:fe13:7e86  prefixlen 64  scopeid 0x20<link>
[az@iZbp13op1xah7j3j1x457dZ ~]$

[az@iZbp13op1xah7j3j1x457dZ ~]$ /sbin/ifconfig eth0 | grep 'inet' | sed 's/^.*inet[ |6]//g' | sed 's/ *netmask.*$//g'| sed 's/ *prefi
.*$//g'
172.16.100.115
 fe80::216:3eff:fe13:7e86
[az@iZbp13op1xah7j3j1x457dZ ~]$

# man_db.conf文件中 只要MAN存在的几行， 含有#在内的不要，空白行也不要
[az@iZbp13op1xah7j3j1x457dZ ~]$ cat /etc/man_db.conf | grep 'MAN' | sed 's/#.*$//g'





MANDATORY_MANPATH                       /usr/man
MANDATORY_MANPATH                       /usr/share/man
MANDATORY_MANPATH                       /usr/local/share/man


MANPATH_MAP     /bin                    /usr/share/man
MANPATH_MAP     /usr/bin                /usr/share/man
MANPATH_MAP     /sbin                   /usr/share/man
MANPATH_MAP     /usr/sbin               /usr/share/man
MANPATH_MAP     /usr/local/bin          /usr/local/man
MANPATH_MAP     /usr/local/bin          /usr/local/share/man
MANPATH_MAP     /usr/local/sbin         /usr/local/man
MANPATH_MAP     /usr/local/sbin         /usr/local/share/man
MANPATH_MAP     /usr/X11R6/bin          /usr/X11R6/man
MANPATH_MAP     /usr/bin/X11            /usr/X11R6/man
MANPATH_MAP     /usr/games              /usr/share/man
MANPATH_MAP     /opt/bin                /opt/man
MANPATH_MAP     /opt/sbin               /opt/man

MANDB_MAP       /usr/man                /var/cache/man/fsstnd
MANDB_MAP       /usr/share/man          /var/cache/man
MANDB_MAP       /usr/local/man          /var/cache/man/oldlocal
MANDB_MAP       /usr/local/share/man    /var/cache/man/local
MANDB_MAP       /usr/X11R6/man          /var/cache/man/X11R6
MANDB_MAP       /opt/man                /var/cache/man/opt
[az@iZbp13op1xah7j3j1x457dZ ~]$ cat /etc/man_db.conf | grep 'MAN' | sed 's/#.*$//g' | sed 's/^$/d'
sed: -e expression #1, char 6: unterminated `s' command
[az@iZbp13op1xah7j3j1x457dZ ~]$ cat /etc/man_db.conf | grep 'MAN' | sed 's/#.*$//g' | sed '/^$/d'
MANDATORY_MANPATH                       /usr/man
MANDATORY_MANPATH                       /usr/share/man
MANDATORY_MANPATH                       /usr/local/share/man
MANPATH_MAP     /bin                    /usr/share/man
MANPATH_MAP     /usr/bin                /usr/share/man
MANPATH_MAP     /sbin                   /usr/share/man
MANPATH_MAP     /usr/sbin               /usr/share/man
MANPATH_MAP     /usr/local/bin          /usr/local/man
MANPATH_MAP     /usr/local/bin          /usr/local/share/man
MANPATH_MAP     /usr/local/sbin         /usr/local/man
MANPATH_MAP     /usr/local/sbin         /usr/local/share/man
MANPATH_MAP     /usr/X11R6/bin          /usr/X11R6/man
MANPATH_MAP     /usr/bin/X11            /usr/X11R6/man
MANPATH_MAP     /usr/games              /usr/share/man
MANPATH_MAP     /opt/bin                /opt/man
MANPATH_MAP     /opt/sbin               /opt/man
MANDB_MAP       /usr/man                /var/cache/man/fsstnd
MANDB_MAP       /usr/share/man          /var/cache/man
MANDB_MAP       /usr/local/man          /var/cache/man/oldlocal
MANDB_MAP       /usr/local/share/man    /var/cache/man/local
MANDB_MAP       /usr/X11R6/man          /var/cache/man/X11R6
MANDB_MAP       /opt/man                /var/cache/man/opt
[az@iZbp13op1xah7j3j1x457dZ ~]$ 
```
- 直接修改文件内容（危险动作）

将文件中的 . 转换成！
```shell
[az@iZbp13op1xah7j3j1x457dZ ~]$ cat regular_express.txt 
"Open Source" is good mechanism to develop programs.
apple is my favorite food.
Football game is not use feet only.
this dress doesn`t fit me.
Howwver, this dress is about $ 3183 dollars.^M
GUN is free air not free beer.^M
Her hair is very beauty.^M
I can`t finish the test.^M
Oh! The soup taste good.^M
motorcycle is cheap than car.
This window is clear.
the symbol '*' is represented as star1.
Oh! My god!
The gd software is a library for drafting programs.^M
Your are the best is mean you are the no. 1.
The world <Happy> is the same with "glad".
I like dog.
google is the best tools for search keyword.
goooooogle yes!
go! go! Let`s go.
# I am AZ

[az@iZbp13op1xah7j3j1x457dZ ~]$ sed -i 's/\.$/\!/g' regular_express.txt 
[az@iZbp13op1xah7j3j1x457dZ ~]$ cat regular_express.txt 
"Open Source" is good mechanism to develop programs!
apple is my favorite food!
Football game is not use feet only!
this dress doesn`t fit me!
Howwver, this dress is about $ 3183 dollars.^M
GUN is free air not free beer.^M
Her hair is very beauty.^M
I can`t finish the test.^M
Oh! The soup taste good.^M
motorcycle is cheap than car!
This window is clear!
the symbol '*' is represented as star1!
Oh! My god!
The gd software is a library for drafting programs.^M
Your are the best is mean you are the no. 1!
The world <Happy> is the same with "glad"!
I like dog!
google is the best tools for search keyword!
goooooogle yes!
go! go! Let`s go!
# I am AZ

[az@iZbp13op1xah7j3j1x457dZ ~]$ 

```
### 正则的扩展
`grep -v '^$' regular_express.txt | grep -v '^#'` ==> `egrep -v '^$|^#' regular_express.txt`
grep默认仅支持基础正则表达式，若要使用扩展 可以使用 grep -E huo egrep

|RE字符|意义与范例|
|---|---|
|+|重复 一个或一个以上 的前一个RE字符<br>查找（god）（good）（good）...等字符串<br> egrep -n 'go+d' regular_express.txt|
|?|零个或一个 的前一个RE字符<br>查找（gd）（god）<br> egrep -n 'go?d' regular_express.txt|
|\||有或的方式查找字符串的个数<br> 查找gd 或 good 这两个字符串 <br> egrep -n 'gd\|good' regular_express.txt|
|()|查找 群组的字符串<br> 查找（glad）或（good）<br> egrep -n 'g(la\|oo)d' regular_express.txt|
|()+|多个重复群组的判别<br> 查找 AxyzxyzxyzC <br> echo "AxyzxyzxyzC"\| egrep 'A(xyz)+C'

## 文件的格式化与相关处理
### 格式化打印：printf
|选项|解释|
|---|---|
|\a|警告声音输出|
|\b|删除键（backspace）|
|\f|清除屏幕 （form feed）|
|\n|输出新的一行|
|\r|Enter 按键|
|\t|水平的 tab 按键|
|\v|垂直的 tab 按键|
|\xNN|NN为两位数的数字，可以转换数字成为字符|
|C程序内，常见的变数格式||
|%ns|n是数字，s代表string，即多少个字符|
|%ni|n是数字，i代表integer，即多少整数字数|
|%N.nf|n与N都是数字，f代表floating（浮点），如果有小数字数。如：共要十个位数，但小数点有两位，即 %10.2f|

```shell
[az@iZbp13op1xah7j3j1x457dZ ~]$ printf '%10s %5i %5i %5i %8.2f \n' $(cat printf.txt | grep -v Name)
    DmTsai    80    60    92    77.22 
     Vbird    75    55    80    70.00 
       Ken    60    90    70    73.33 
[az@iZbp13op1xah7j3j1x457dZ ~]$ 
```
### awk：数据处理工具
sed 常常作用于一整行的处理，awk则比较倾向于一行当中分成数个 字段 来处理。awk适合处理小型数据的数据处理

```shell
[az@iZbp13op1xah7j3j1x457dZ ~]$ last -n 5 
root     pts/2        36.142.32.177    Thu Aug  8 11:37 - 13:55  (02:18)    
root     pts/2        36.142.32.177    Wed Aug  7 17:44 - 20:21  (02:36)    
root     pts/3        42.91.165.230    Thu Aug  1 22:48 - 01:08  (02:19)    
root     pts/2        42.91.165.230    Thu Aug  1 22:42 - 00:54  (02:12)    
root     pts/1        42.91.165.230    Thu Aug  1 22:13 - 00:24  (02:11)    

wtmp begins Fri Mar 22 11:34:39 2024

# 取出账号和登录者的IP，且账号与IP之间以 [tab] 分隔
[az@iZbp13op1xah7j3j1x457dZ ~]$ last -n 5 | awk '{print $1 "\t" $3}'
root    36.142.32.177
root    36.142.32.177
root    42.91.165.230
root    42.91.165.230
root    42.91.165.230

wtmp    Fri
[az@iZbp13op1xah7j3j1x457dZ ~]$ 

```
awk内建变量
|变量名称|代表意义|
|---|---|
|NF|每一行($0)拥有的字段总数|
|NR|目前awk所处理的是 第几行 数据|
|FS|目前的分隔字符，默认是空格键|

```shell
# 列出每一行的账号 $1
# 列出目前处理的行数 awk 内的 NR 变量
# 并且说明，改行有多少个字段  awk内的NF变量
[az@iZbp13op1xah7j3j1x457dZ ~]$ last -n 5 | awk '{print $1 "\t lines: " NR "\t columns: " NF}'
root     lines: 1        columns: 10
root     lines: 2        columns: 10
root     lines: 3        columns: 10
root     lines: 4        columns: 10
root     lines: 5        columns: 10
         lines: 6        columns: 0
wtmp     lines: 7        columns: 7
[az@iZbp13op1xah7j3j1x457dZ ~]$ 
```

- awk 的逻辑运算字符
|运算单元|代表意义|
|---|---|
|>|大于|
|<|小于|
|>=|大于或等于|
|<=|小于或等于|
|==|等于|
|!=|不等于|

```shell
# 以：分隔字符串 $3 表示第三个变量 小于 10  打印 第一个变量 tab 第三个变量
[az@iZbp13op1xah7j3j1x457dZ ~]$ cat /etc/passwd | awk '{FS=":"} $3 < 10 {print $1 "\t " $3}'
root:x:0:0:root:/root:/bin/bash  
bin      1
daemon   2
adm      3
lp       4
sync     5
shutdown         6
halt     7
mail     8
[az@iZbp13op1xah7j3j1x457dZ ~]$ 

# 第一行没有正确显示。是因为读入第一行的时候，那些变数$1,$2...默认还是以空格键为分隔父的，即使是定义了 FS=":"，他只能在第二行后才开始生效。可以使用BEGIN这个关键词

[az@iZbp13op1xah7j3j1x457dZ ~]$ cat /etc/passwd | awk 'BEGIN {FS=":"} $3 < 10 {print $1 "\t" $3}'
root    0
bin     1
daemon  2
adm     3
lp      4
sync    5
shutdown        6
halt    7
mail    8
[az@iZbp13op1xah7j3j1x457dZ ~]$ 

[az@iZbp13op1xah7j3j1x457dZ ~]$ cat pay.txt | awk 'NR==1{printf "%10s %10s %10s %10s\n",$1,$2,$3,$4,"Total"} NR>=2{total = $2 + $3 + $4; printf "%1
0s %10d %10d %10.2f\n", $1, $2, $3, $4, total}'
      Name        1st        2nd        3th
     VBird      23000      24000   25000.00
    DMTsai      21000      20000   23000.00
     Bird2      43200      40000   50000.00
[az@iZbp13op1xah7j3j1x457dZ ~]$ cat pay.txt | awk 'NR==1{printf "%10s %10s %10s %10s\n",$1,$2,$3,$4,"Total"} NR>=2{total = $2 + $3 + $4; printf "%10s %10d %10d %10d  %10.2f\n", $1, $2, $3, $4, total}'
      Name        1st        2nd        3th
     VBird      23000      24000      25000    72000.00
    DMTsai      21000      20000      23000    64000.00
     Bird2      43200      40000      50000   133200.00
[az@iZbp13op1xah7j3j1x457dZ ~]$ cat pay.txt | awk 'NR==1{printf "%10s %10s %10s %10s  %10s\n",$1,$2,$3,$4,"Total"} NR>=2{total = $2 + $3 + $4; prin
tf "%10s %10d %10d %10d  %10.2f\n", $1, $2, $3, $4, total}'
      Name        1st        2nd        3th       Total
     VBird      23000      24000      25000    72000.00
    DMTsai      21000      20000      23000    64000.00
     Bird2      43200      40000      50000   133200.00
[az@iZbp13op1xah7j3j1x457dZ ~]$ 
```
     - awk的指令间隔： 所有awk动作，即在｛｝内的动作，如果有需要多个指令辅助时，可利用分号 ; 间隔，或者直接以 enter 按键来隔开每个指令
     - 逻辑运算当中，如果是 等于 的情况，则务必使用 ==
     - 格式化输出时，在printf的格式设定当中，务必加上 \n，才能进行分析
     - 与bash shell的变量不同，在awk当中，变量可以直接使用，不需要加上 $ 符号

### 文件比对工具
同一个软件包的不同版本之间，比较配置文件与原始文件的差异
很多时候，所谓的文件对比，通常是用ASCII纯文本档的比对上的。

- diff
  diff是用在比对两个文件之间的差异的，并且是以行为单位比对的。一般使用在纯文本档的比对上。由于是以行为比对的单位，因此diff通常是用在同一的文件的新旧版本差异上
  `diff [-bBi] from-file to-file`
  
  |选项|解释|
  |---|---|
  |from-file|一个档名，作为原始比对文件的档名|
  |to-file|一个档名， 作为目的比对文件的的档名|
  |form-file/to-file|可以使用 - 替代， - 是 standard input|
  |-b|忽略一行当中，仅有多个空白的差异|
  |-B|忽略空白行的差异|
  |-i|忽略大小写的不同|
     ```shell
     [az@iZbp13op1xah7j3j1x457dZ ~]$ mkdir -p /tmp/testpw
     [az@iZbp13op1xah7j3j1x457dZ ~]$ cd /tmp/testpw/
     [az@iZbp13op1xah7j3j1x457dZ testpw]$ cp /etc/passwd passwd.old
     [az@iZbp13op1xah7j3j1x457dZ testpw]$ cat /etc/passwd | sed -e '4d' -e '6c' no size line > passwd.new
     sed: -e expression #2, char 2: expected \ after `a', `c' or `i'
     [az@iZbp13op1xah7j3j1x457dZ testpw]$ cat /etc/passwd | sed -e '4d' -e '6c no size line' > passwd.new
     [az@iZbp13op1xah7j3j1x457dZ testpw]$ diff passwd.old passwd.new
     4d3
     < adm:x:3:4:adm:/var/adm:/sbin/nologin
     6c5
     < sync:x:5:0:sync:/sbin:/bin/sync
     ---
     > no size line
     [az@iZbp13op1xah7j3j1x457dZ testpw]$ 
     ```
- cmp
  cmp主要也是在比对两个文件，它主要是利用 字节 单位取比对。 所有他可以比对 binary file 文件。
  diff 主要是以 行 为单位比对， cmp 则是以 字节 为单位去比对

  |选项|解释|
  |---|---|
  |-l|将所有的不同点的字节处都列出来。cmp默认仅会输出第一个发现的不同点|
  
  ```shell
  [az@iZbp13op1xah7j3j1x457dZ testpw]$ cmp passwd.old passwd.new
  passwd.old passwd.new differ: byte 106, line 4
  [az@iZbp13op1xah7j3j1x457dZ testpw]$ 
  ```

- patch

```shell
# diff: 这是一个 Unix 命令行工具,用于比较两个文件或目录之间的差异。
# -N：这个选项告诉 diff 命令在比较文件时,如果某个文件不存在,就将其视为空文件。
# -a：这个选项告诉 diff 命令将文本文件视为 ASCII 文本,而不是二进制文件。
# -u：这个选项告诉 diff 命令以 "统一格式" 输出差异,这种格式更易于阅读和理解。
# passwd.old：这是要与 passwd.new 进行比较的旧文件。
# passwd.new：这是要与 passwd.old 进行比较的新文件。
# > passwd.patch：这将 diff 命令的输出重定向到 passwd.patch 文件中,生成差异补丁文件。

[az@iZbp13op1xah7j3j1x457dZ testpw]$ diff -Naur passwd.old passwd.new > passwd.patch
[az@iZbp13op1xah7j3j1x457dZ testpw]$ cat passwd.patch 
--- passwd.old  2024-08-22 16:26:44.520035390 +0800
+++ passwd.new  2024-08-22 16:27:45.500417691 +0800
@@ -1,9 +1,8 @@
 root:x:0:0:root:/root:/bin/bash
 bin:x:1:1:bin:/bin:/sbin/nologin
 daemon:x:2:2:daemon:/sbin:/sbin/nologin
-adm:x:3:4:adm:/var/adm:/sbin/nologin
 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin
-sync:x:5:0:sync:/sbin:/bin/sync
+no size line
 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
 halt:x:7:0:halt:/sbin:/sbin/halt
 mail:x:8:12:mail:/var/spool/mail:/sbin/nologin
[az@iZbp13op1xah7j3j1x457dZ testpw]$ 


# -p 后面接 取消几层目录 的意思
# -R 代表还原，将新的文件还原成原来就的版本

[az@iZbp13op1xah7j3j1x457dZ tmp]$ cd testpw/
[az@iZbp13op1xah7j3j1x457dZ testpw]$ ls
passwd.new  passwd.old  passwd.patch
[az@iZbp13op1xah7j3j1x457dZ testpw]$ patch -p0 < passwd.patch 
patching file passwd.old
[az@iZbp13op1xah7j3j1x457dZ testpw]$ ll passwd*
-rw-rw-r-- 1 az az 1500 Aug 22 16:27 passwd.new
-rw-r--r-- 1 az az 1500 Aug 22 16:44 passwd.old
-rw-rw-r-- 1 az az  481 Aug 22 16:38 passwd.patch
[az@iZbp13op1xah7j3j1x457dZ testpw]$ patch -R -p0 < passwd.patch 
patching file passwd.old
[az@iZbp13op1xah7j3j1x457dZ testpw]$ ll passwd*
-rw-rw-r-- 1 az az 1500 Aug 22 16:27 passwd.new
-rw-r--r-- 1 az az 1556 Aug 22 16:44 passwd.old
-rw-rw-r-- 1 az az  481 Aug 22 16:38 passwd.patch
[az@iZbp13op1xah7j3j1x457dZ testpw]$

```

### 文件打印准备： pr
```shell
[az@iZbp13op1xah7j3j1x457dZ testpw]$ pr /etc/man_db.conf


2018-10-31 04:26                 /etc/man_db.conf                 Page 1


# 
#
# This file is used by the man-db package to configure the man and cat paths.
# It is also used to provide a manpath for those without one by examining
# their PATH environment variable. For details see the manpath(5) man page.
#
# Lines beginning with `#' are comments and are ignored. Any combination of
# tabs or spaces may be used as `whitespace' separators.
#
# There are three mappings allowed in this file:
# --------------------------------------------------------
# MANDATORY_MANPATH                     manpath_element
# MANPATH_MAP           path_element    manpath_element
# MANDB_MAP             global_manpath  [relative_catpath]
#---------------------------------------------------------
# every automatically generated MANPATH includes these fields
#
#MANDATORY_MANPATH                      /usr/src/pvm3/man
#
MANDATORY_MANPATH                       /usr/man
MANDATORY_MANPATH                       /usr/share/man
MANDATORY_MANPATH                       /usr/local/share/man
#---------------------------------------------------------
# set up PATH to MANPATH mapping
# ie. what man tree holds man pages for what binary directory.
#
#               *PATH*        ->        *MANPATH*
#
MANPATH_MAP     /bin                    /usr/share/man
MANPATH_MAP     /usr/bin                /usr/share/man
MANPATH_MAP     /sbin                   /usr/share/man
MANPATH_MAP     /usr/sbin               /usr/share/man
MANPATH_MAP     /usr/local/bin          /usr/local/man
MANPATH_MAP     /usr/local/bin          /usr/local/share/man
MANPATH_MAP     /usr/local/sbin         /usr/local/man
MANPATH_MAP     /usr/local/sbin         /usr/local/share/man
MANPATH_MAP     /usr/X11R6/bin          /usr/X11R6/man
MANPATH_MAP     /usr/bin/X11            /usr/X11R6/man
MANPATH_MAP     /usr/games              /usr/share/man
MANPATH_MAP     /opt/bin                /opt/man
MANPATH_MAP     /opt/sbin               /opt/man
#---------------------------------------------------------
# For a manpath element to be treated as a system manpath (as most of those
# above should normally be), it must be mentioned below. Each line may have
# an optional extra string indicating the catpath associated with the
# manpath. If no catpath string is used, the catpath will default to the
# given manpath.
#
# You *must* provide all system manpaths, including manpaths for alternate
# operating systems, locale specific manpaths, and combinations of both, if
# they exist, otherwise the permissions of the user running man/mandb will
# be used to manipulate the manual pages. Also, mandb will not initialise
# the database cache for any manpaths not mentioned below unless explicitly
# requested to do so.
#
# In a per-user configuration file, this directive only controls the







2018-10-31 04:26                 /etc/man_db.conf                 Page 2


# location of catpaths and the creation of database caches; it has no effect
# on privileges.
#
# Any manpaths that are subdirectories of other manpaths must be mentioned
# *before* the containing manpath. E.g. /usr/man/preformat must be listed
# before /usr/man.
#
#               *MANPATH*     ->        *CATPATH*
#
MANDB_MAP       /usr/man                /var/cache/man/fsstnd
MANDB_MAP       /usr/share/man          /var/cache/man
MANDB_MAP       /usr/local/man          /var/cache/man/oldlocal
MANDB_MAP       /usr/local/share/man    /var/cache/man/local
MANDB_MAP       /usr/X11R6/man          /var/cache/man/X11R6
MANDB_MAP       /opt/man                /var/cache/man/opt
#
#---------------------------------------------------------
# Program definitions.  These are commented out by default as the value
# of the definition is already the default.  To change: uncomment a
# definition and modify it.
#
#DEFINE         pager   less -s
#DEFINE         cat     cat
#DEFINE         tr      tr '\255\267\264\327' '\055\157\047\170'
#DEFINE         grep    grep
#DEFINE         troff   groff -mandoc
#DEFINE         nroff   nroff -mandoc -c
#DEFINE         eqn     eqn
#DEFINE         neqn    neqn
#DEFINE         tbl     tbl
#DEFINE         col     col
#DEFINE         vgrind 
#DEFINE         refer   refer
#DEFINE         grap 
#DEFINE         pic     pic -S
#
#DEFINE         compressor      gzip -c7
#---------------------------------------------------------
# Misc definitions: same as program definitions above.
#
#DEFINE         whatis_grep_flags               -i
#DEFINE         apropos_grep_flags              -iEw
#DEFINE         apropos_regex_grep_flags        -iE
#---------------------------------------------------------
# Section names. Manual sections will be searched in the order listed here;
# the default is 1, n, l, 8, 3, 0, 2, 5, 4, 9, 6, 7. Multiple SECTION
# directives may be given for clarity, and will be concatenated together in
# the expected way.
# If a particular extension is not in this list (say, 1mh), it will be
# displayed with the rest of the section it belongs to. The effect of this
# is that you only need to explicitly list extensions if you want to force a
# particular order. Sections with extensions should usually be adjacent to
# their main section (e.g. "1 1mh 8 ...").
#
SECTION         1 1p 8 2 3 3p 4 5 6 7 9 0p n l p o 1x 2x 3x 4x 5x 6x 7x 8x
#







2018-10-31 04:26                 /etc/man_db.conf                 Page 3


#---------------------------------------------------------
# Range of terminal widths permitted when displaying cat pages. If the
# terminal falls outside this range, cat pages will not be created (if
# missing) or displayed.
#
#MINCATWIDTH    80
#MAXCATWIDTH    80
#
# If CATWIDTH is set to a non-zero number, cat pages will always be
# formatted for a terminal of the given width, regardless of the width of
# the terminal actually being used. This should generally be within the
# range set by MINCATWIDTH and MAXCATWIDTH.
#
#CATWIDTH       0
#
#---------------------------------------------------------
# Flags.
# NOCACHE keeps man from creating cat pages.
#NOCACHE


```


